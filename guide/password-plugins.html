<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SecureSocial - Authentication for Play Framework Applications</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles --><link href="../stylesheets/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/bootstrap-responsive.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/pygment.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/main.css" media="screen" rel="stylesheet" type="text/css">
<style type="text/css">
      body {
        padding-top: 20px;        
      }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div id="wrap">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">SecureSocial</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
<li><a href="../">Home</a></li>
              <li class="active"><a href="getting-started.html">Getting Started</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="https://groups.google.com/forum/#!forum/securesocial" target="_blank">Forum</a></li>
              <li><a href="https://github.com/jaliss/securesocial" target="_blank">View on Github</a></li>                            
            </ul>
</div>
<!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="sidebar-nav">
  <ul class="nav nav-list">
<li class="nav-header">Contents</li>
        
    	<li>
    		<a href="getting-started.html">Getting Started</a> 
    	</li>
   	    
    	<li>
    		<a href="installation.html">Installation</a> 
    	</li>
   	    
    	<li>
    		<a href="configuration.html">Configuration</a> 
    	</li>
   	    
    	<li>
    		<a href="securing.html">Securing your Actions</a> 
    	</li>
   	    
    	<li>
    		<a href="authorization.html">Adding Authorization</a> 
    	</li>
   	    
    	<li>
    		<a href="user-service.html">UserService</a> 
    	</li>
   	    
    	<li>
    		<a href="views-customization.html">Views and Emails Customization</a> 
    	</li>
   	    
    	<li>
    		<a href="password-change.html">Password Change Page</a> 
    	</li>
   	    
    	<li class="active">
    		<a href="password-plugins.html">Password Plugins</a> 
    	</li>
   	    
    	<li>
    		<a href="events.html">Events</a> 
    	</li>
   	    
    	<li>
    		<a href="faqs.html">FAQs</a> 
    	</li>
   	    
    	<li>
    		<a href="changelog.html">Change Log</a> 
    	</li>
   	
    </ul>
</div>     
        </div>

        <div class="span9">                   
              <h1>Password Plugins</h1>

<p>When users sign up and enter a password it is required to enforce some strength on them to disallow really week ones.  Storing passwords in clear text is not recommended either.  To address these two things SecureSocial uses the following plugins:</p>

<ul>
<li><p><code>PasswordValidador</code>: Used when users submit the registration form to validate the password.</p></li>
<li><p><code>PasswordHasher</code>: Used to hash the password entered by the user prior to saving it.</p></li>
</ul>
<p>The modules comes with default implementations for each:</p>

<ul>
<li><p><code>DefaultPasswordValidator</code>: A validator that restricts passwords to a minimum length. By default the length is 8 but can be changed by setting the <code>minimumPasswordLength</code> in the properties file.</p></li>
<li><p><code>BCryptPasswordHasher</code>: A password hasher based on the bcrypt algorithm. </p></li>
</ul>
<p>This will be good enough for many cases, but if you need to change the way password length/strength is enforced and/or how they are hashed you can write your own plugins and register them in the <code>play.plugins</code> file instead of the ones provided by SecureSocial.</p>

<h2>PasswordValidator</h2>

<h3>Scala</h3>

<p>For Scala, you need to extend the <code>PasswordValidator</code> class:</p>

<div class="highlight"><pre><span class="k">abstract</span> <span class="k">class</span> <span class="nc">PasswordValidator</span> <span class="k">extends</span> <span class="nc">Plugin</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">isValid</span><span class="o">(</span><span class="n">password</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span>
    <span class="k">def</span> <span class="n">errorMessage</span><span class="k">:</span> <span class="kt">String</span>
<span class="o">}</span>
</pre></div>

<ul>
<li><p><code>isValid</code>: Must return true or false depending on whether the supplied passwors is good enough for the validator.</p></li>
<li><p><code>errorMessage</code>: An error message that will be shown on the sign up page if the password is invalid.</p></li>
</ul>
<p>You will also need to add a constructor that receives an <code>Application</code> instance.</p>

<h3>Java</h3>

<p>For Java, extend the <code>PasswordValidator</code> class and implement the <code>isValid</code> and <code>errorMessage</code> methods as described above and also add a public constructor that receives an <code>Application</code> instance.</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isValid</span><span class="o">(</span><span class="n">String</span> <span class="n">password</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">errorMessage</span><span class="o">()</span>    
</pre></div>

<h2>PasswordHasher</h2>

<h3>Scala</h3>

<p>For Scala, extend the <code>PasswordHasher</code> class:</p>

<div class="highlight"><pre><span class="k">abstract</span> <span class="k">class</span> <span class="nc">PasswordHasher</span> <span class="k">extends</span> <span class="nc">Plugin</span> <span class="k">with</span> <span class="nc">Registrable</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">hash</span><span class="o">(</span><span class="n">plainPassword</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">PasswordInfo</span>
    <span class="k">def</span> <span class="n">matches</span><span class="o">(</span><span class="n">passwordInfo</span><span class="k">:</span> <span class="kt">PasswordInfo</span><span class="o">,</span> <span class="n">suppliedPassword</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Boolean</span>
<span class="o">}</span>
</pre></div>

<ul>
<li><p><code>id</code>: returns a <code>String</code> that identifies this hasher.</p></li>
<li><p><code>hash</code>: this method hashes the password and returns a <code>PasswordInfo</code> containing the hashed password and optionally the salt used to hash it.</p></li>
<li><p><code>matches</code>: checks if the <code>suppliedPassword</code> matches the hashed one in <code>passwordInfo</code>.</p></li>
</ul>
<h3>Java</h3>

<p>For Java, extend the <code>PasswordHasher</code> class and implement the <code>id</code>, <code>hash</code> and <code>match</code> mathods:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="n">String</span> <span class="nf">id</span><span class="o">()</span>
<span class="kd">public</span> <span class="n">PasswordInfo</span> <span class="nf">hash</span><span class="o">(</span><span class="n">String</span> <span class="n">plainPassword</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">PasswordInfo</span> <span class="n">passwordInfo</span><span class="o">,</span> <span class="n">String</span> <span class="n">suppliedPassword</span><span class="o">)</span>
</pre></div>

<p>The <code>PasswordInfo</code> object is defined in Scala.  To create an instance can do do something like:</p>

<div class="highlight"><pre><span class="c1">// to create one with a salt</span>
<span class="n">PasswordInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PasswordInfo</span><span class="o">(</span><span class="s">"my_hasher"</span><span class="o">,</span> <span class="s">"hashed_password_here"</span><span class="o">,</span> <span class="n">Scala</span><span class="o">.</span><span class="na">Option</span><span class="o">(</span><span class="s">"some_salt"</span><span class="o">));</span>

<span class="c1">// to create one without a salt</span>
<span class="n">PasswordInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PasswordInfo</span><span class="o">(</span><span class="s">"my_hasher"</span><span class="o">,</span> <span class="s">"hashed_password_here"</span><span class="o">,</span> <span class="n">Scala</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">Option</span><span class="o">(</span><span class="kc">null</span><span class="o">));</span>
</pre></div>
            
        </div>
      </div>    
    </div>
    <div id="push"></div>
    </div>
    <div id="footer">
	<div class="container">
		<p> <a href="https://github.com/jaliss/securesocial">View on Github</a></p>        
        <p>Designed and developed by <a href="http://twitter.com/jaliss" target="_blank">@jaliss</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p>Â© 2011-2013 Jorge Aliss       
    </p>
</div>
       
</div>
      
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1441023-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
